;/*FB_PKG_DELIM*/

__d("ZenonDGWLogger",["$InternalEnum","DGWStreamGroupCallbacks","QuickPerformanceLogger","ZenonAuditedCheckpointLogId","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonLoggingUtils","ZenonODSLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["LOGGED_NONE","LOGGED_RETRY","LOGGED_FAILURE"]),u=r("qpl")._(398986999,"3052"),c=r("ZenonDebugLogger").getInstance(),d=!1,m=null;function p(e){d=!0,m=e}function _(t,n){if(o("ZenonLoggingUtils").shouldAllowLogging())switch(t.name){case"dgwStreamCreationInitiated":f(n,t.headers,t.dgwInfo);break;case"dgwStreamCreationSuccess":(e||(e=r("QuickPerformanceLogger"))).markerEnd(u,2,n);break;case"dgwStreamCreationError":c.logConsole("[DGW] Stream creation error: "+t.error),(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(u,{string:{error:t.error}},{instanceKey:n}),(e||(e=r("QuickPerformanceLogger"))).markerEnd(u,87,n);break;case"dgwStreamClosed":c.logConsole("[DGW] Stream closed"+(t.reason!=null?" - Reason: "+t.reason:"")+"}");break;case"dgwStreamError":c.logConsole("[DGW] Stream error: "+t.error);break;default:break}}function f(t,n,o){(e||(e=r("QuickPerformanceLogger"))).markerStart(u,t),e.markerAnnotate(u,{bool:{hasAuthToken:o.hasAuthToken},string:babelHelpers.extends({},n,{deviceId:o.deviceId,loggingId:o.loggingId,serviceId:o.serviceId,windowContext:o.windowContext})},{instanceKey:t}),e.markerPoint(u,"initStreamCreation",{instanceKey:t})}function g(e,t){var n="DGW_STREAM_ERROR_"+t+"_"+e;E(n),r("ZenonODSLogger").logCounter(n)}function h(){E("DGW_SERVER_HAS_FINISHED_SENDING_DATA"),r("ZenonODSLogger").logCounter("DGW_SERVER_HAS_FINISHED_SENDING_DATA")}function y(e){var t="DGW_STREAM_MUST_DRAIN_"+e;E(t),r("ZenonODSLogger").logCounter(t)}function C(){E("DGW_STREAM_RETRY"),r("ZenonODSLogger").logCounter("DGW_STREAM_RETRY")}function b(e){var t=e?"_"+e:"";E("DGW_STREAM_RETRY_SUCCEEDED"+t),r("ZenonODSLogger").logCounter("DGW_STREAM_RETRY_SUCCEEDED"+t)}function v(e){var t=e?"_"+e:"";E("DGW_STREAM_RETRY_FAILED"+t),r("ZenonODSLogger").logCounter("DGW_STREAM_RETRY_FAILED"+t)}function S(e,t){E("["+e+"] Stream closed - Reason: "+(t!=null?t:""))}function R(e){var t="DGW_STREAM_GROUP_ERROR_"+o("DGWStreamGroupCallbacks").dgwStreamGroupErrorToString(e);E(t),r("ZenonODSLogger").logCounter(t)}function L(e){var t="DGW_STREAM_GROUP_MUST_DRAIN_"+e;E(t),r("ZenonODSLogger").logCounter(t)}function E(e){d&&m!=null?m("[SW][ZP] [DGW] "+e):r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] [DGW] "+e})}l.RetryLogState=s,l.setSharedWorkerContext=p,l.logEvent=_,l.logDGWErrorToODS=g,l.logDGWServerHasFinishedToODS=h,l.logDGWStreamMustDrainToODS=y,l.logDGWRetryToODS=C,l.logDGWSucceededRetry=b,l.logDGWFailedRetry=v,l.logDGWStreamClose=S,l.logDGWStreamGroupError=R,l.logDGWStreamGroupMustDrain=L,l.logDGWCheckpoint=E}),98);
__d("ZenonDGWMessageQueue",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.enqueue=function(t){this.$1.has(t.messageId)||this.$1.set(t.messageId,t)},t.dequeue=function(t){this.$1.delete(t)},t.sendAllWith=async function(t){this.$2(),await Promise.allSettled(this.$1.values().map(async function(e){e.succeeded=await t.send(e.data,e.timeoutInMs)}))},t.$2=function(){var e=this,t=Array.from(this.$1.values()).filter(function(t){return!e.$3(t)}).map(function(e){return e.messageId});t.forEach(function(t){return e.$1.delete(t)})},t.$3=function(t){var e=Date.now(),n=t.expiryTime,r=n!=null&&e>n;return!r&&!t.succeeded},e})();i.default=e}),66);
__d("ZenonDGWStreamGroupCoordinator",["DGWAuth","DGWClient","DGWConstants","DGWStreamGroupHandler","FBLogger","RawDGWClient","ZenonDGWLogger","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("5209"),s=r("justknobx")._("5210"),u=(function(){function t(e){this.$1=null,this.$3=e}var n=t.prototype;return n.$5=function(){var e=this;return new(r("DGWStreamGroupHandler"))(function(t){e.killStreamGroup(),o("ZenonDGWLogger").logDGWStreamGroupError(t),e.$3()},function(t){e.killStreamGroup(),o("ZenonDGWLogger").logDGWStreamGroupMustDrain(t),e.$3()},function(){e.killStreamGroup(),e.$3()})},n.setDGWConfig=function(t){this.$4=t,this.$1=this.getOrCreateRawDGWClientInstance()},n.establishStream=function(n,o,a){if(this.$2==null){var t,i={authToken:a.authToken,authType:a.authType,connectTimeoutMs:s,deviceId:a.deviceId,disableFalcoLogging:a.disableFalcoLogging,keepAliveMs:e,loggingId:a.loggingId,serviceId:(t=a.serviceId)!=null?t:"rpsignaling",streamGroupAppHeaders:{"stream-group":"group1"}};a.overrideUrl!=null&&(i.overrideUrl=a.overrideUrl);var l=this.$1?this.$1:r("DGWClient")();this.$2=l.createStreamGroup(this.$5(),i)}return this.$2.establishStream({disableFalcoLogging:a.disableFalcoLogging,groupedStreamHeaders:n,loggingId:a.loggingId},o)},n.getOrCreateRawDGWClientInstance=function(){if(this.$1!=null)return this.$1;if(this.$4==null){var e=r("err")("dgwConfig is required but was not provided");throw r("FBLogger")("zenon").catching(e).mustfix("Failed to create RawDGWClient: missing dgwConfig"),e}var t=this.$4;return new(o("RawDGWClient")).RawDGWClient({appId:t.appId,appVersion:t.appVersion,authToken:t.authToken,authType:o("DGWAuth").fromStringToDGWAuth(t.authType),dgwVersion:o("DGWConstants").DgwVersion.DGWVER_BIG_IDS,endpoint:t.endpoint,fbId:t.fbId,isUserLoggedIn:t.isUserLoggedIn})},n.killStreamGroup=function(){var e;(e=this.$2)==null||e.close(),this.$2=null},t})();l.default=u}),98);
__d("ZenonDGWStreamController",["DGWStream","EventEmitter","Random","Run","ZenonDGWLogger","ZenonDGWMessageQueue","ZenonDGWStreamGroupCoordinator","ZenonDeviceId","justknobx","promiseDone","qex","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("1942"),u=r("justknobx")._("5207"),c=r("justknobx")._("5208"),d=(e=r("qex")._("3872"))!=null?e:!1,m=null,p=(function(e){function t(){var t;return t=e.call(this)||this,t.$ZenonDGWStreamController$p_6=o("Random").uint32(),t.$ZenonDGWStreamController$p_7="UNKNOWN",t.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_NONE,t.$ZenonDGWStreamController$p_9="Disconnected",t.$ZenonDGWStreamController$p_10=s,t.$ZenonDGWStreamController$p_11=!1,t.$ZenonDGWStreamController$p_5={deviceId:o("ZenonDeviceId").getZenonDeviceId(),loggingId:r("uuidv4")(),serviceId:"rpsignaling"},t.$ZenonDGWStreamController$p_1=new(r("ZenonDGWStreamGroupCoordinator"))(function(){r("promiseDone")(t.$ZenonDGWStreamController$p_19())}),o("Run").onBeforeUnload(function(){t.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY&&o("ZenonDGWLogger").logDGWFailedRetry()}),d&&(t.$ZenonDGWStreamController$p_2=new(r("ZenonDGWMessageQueue"))),t.$ZenonDGWStreamController$p_4={},t}babelHelpers.inheritsLoose(t,e),t.getControllerInstance=function(){return m||(m=new t),m};var n=t.prototype;return n.setHeaders=function(t){this.$ZenonDGWStreamController$p_4=t},n.setStreamOptions=function(t){this.$ZenonDGWStreamController$p_5=t},n.setDGWConfig=function(t){this.$ZenonDGWStreamController$p_18=t,this.$ZenonDGWStreamController$p_1.setDGWConfig(t)},n.setWindowContext=function(t){this.$ZenonDGWStreamController$p_7=t},n.getStream=function(){return this.$ZenonDGWStreamController$p_3},n.closeStream=function(t){this.$ZenonDGWStreamController$p_3!=null&&(this.$ZenonDGWStreamController$p_3.close(),this.$ZenonDGWStreamController$p_3=null,o("ZenonDGWLogger").logDGWStreamClose(this.$ZenonDGWStreamController$p_7,t))},n.$ZenonDGWStreamController$p_20=function(t){this.$ZenonDGWStreamController$p_9=t,this.emit("connectionStateEvent",t)},n.$ZenonDGWStreamController$p_21=function(){var e=this,t={onClose:function(n){e.$ZenonDGWStreamController$p_13==null||e.$ZenonDGWStreamController$p_13(n),e.$ZenonDGWStreamController$p_3=null},onDataReceived:function(n){e.$ZenonDGWStreamController$p_14==null||e.$ZenonDGWStreamController$p_14(n)},onError:function(n){e.$ZenonDGWStreamController$p_15==null||e.$ZenonDGWStreamController$p_15(n),o("ZenonDGWLogger").logDGWErrorToODS(n,e.$ZenonDGWStreamController$p_7),e.$ZenonDGWStreamController$p_19(n)},onServerHasFinishedSendingData:function(n){e.$ZenonDGWStreamController$p_17==null||e.$ZenonDGWStreamController$p_17(n),o("ZenonDGWLogger").logDGWServerHasFinishedToODS(),e.$ZenonDGWStreamController$p_19()},onStreamMustDrain:function(n,r){e.$ZenonDGWStreamController$p_16==null||e.$ZenonDGWStreamController$p_16(n,r),o("ZenonDGWLogger").logDGWStreamMustDrainToODS(r),e.$ZenonDGWStreamController$p_19()}};return t},n.$ZenonDGWStreamController$p_19=function(t){return t!=null&&!o("DGWStream").isRetryableError(t)||this.$ZenonDGWStreamController$p_10<=0?(o("ZenonDGWLogger").logEvent({error:String(t!=null?t:"drain"),name:"dgwStreamCreationError"},this.$ZenonDGWStreamController$p_6),this.$ZenonDGWStreamController$p_20("Disconnected"),this.$ZenonDGWStreamController$p_10<=0&&this.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY&&(this.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_FAILURE,o("ZenonDGWLogger").logDGWFailedRetry(t)),Promise.resolve()):(this.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_NONE&&(this.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY,o("ZenonDGWLogger").logDGWRetryToODS()),this.$ZenonDGWStreamController$p_12==null&&(this.closeStream("reestablishing stream"),this.$ZenonDGWStreamController$p_1.killStreamGroup(),this.$ZenonDGWStreamController$p_10--),this.establishAndGetStream())},n.restartStreamWithNewOptions=function(t){return this.closeStream("restarting with new options"),this.$ZenonDGWStreamController$p_1.killStreamGroup(),this.$ZenonDGWStreamController$p_5=t,this.establishAndGetStream()},n.setOnCloseCallback=function(t){this.$ZenonDGWStreamController$p_13=t},n.setOnDataReceivedCallback=function(t){this.$ZenonDGWStreamController$p_14=t},n.setOnErrorCallback=function(t){this.$ZenonDGWStreamController$p_15=t},n.setOnStreamMustDrainCallback=function(t){this.$ZenonDGWStreamController$p_16=t},n.setOnServerHasFinishedSendingDataCallback=function(t){this.$ZenonDGWStreamController$p_17=t},n.getConnectionState=function(){return this.$ZenonDGWStreamController$p_9},n.send=async function(t,n,r){var e,a,i,l={data:n,expiryTime:Date.now()+u,messageId:t,succeeded:!1,timeoutInMs:r!=null?r:c};(e=this.$ZenonDGWStreamController$p_2)==null||e.enqueue(l);var s=(a=await((i=this.$ZenonDGWStreamController$p_3)==null?void 0:i.send(l.data,l.timeoutInMs)))!=null?a:!1;if(!s)this.$ZenonDGWStreamController$p_19(o("DGWStream").StreamError.ACK_TIMEOUT);else{var d;l.succeeded=!0,(d=this.$ZenonDGWStreamController$p_2)==null||d.dequeue(l.messageId)}return s},n.establishAndGetStream=async function(){var e=this;if(this.$ZenonDGWStreamController$p_3)return this.$ZenonDGWStreamController$p_3;if(this.$ZenonDGWStreamController$p_12!=null)return await this.$ZenonDGWStreamController$p_12;var t=(async function(){try{var t;o("ZenonDGWLogger").logEvent({dgwInfo:{deviceId:e.$ZenonDGWStreamController$p_5.deviceId,hasAuthToken:e.$ZenonDGWStreamController$p_5.authToken!=null,loggingId:e.$ZenonDGWStreamController$p_5.loggingId,serviceId:e.$ZenonDGWStreamController$p_5.serviceId,windowContext:e.$ZenonDGWStreamController$p_7},headers:e.$ZenonDGWStreamController$p_4,name:"dgwStreamCreationInitiated"},e.$ZenonDGWStreamController$p_6),e.$ZenonDGWStreamController$p_20("Connecting");var n=await e.$ZenonDGWStreamController$p_1.establishStream(e.$ZenonDGWStreamController$p_4,e.$ZenonDGWStreamController$p_21(),e.$ZenonDGWStreamController$p_5);return o("ZenonDGWLogger").logEvent({name:"dgwStreamCreationSuccess"},e.$ZenonDGWStreamController$p_6),e.$ZenonDGWStreamController$p_8===o("ZenonDGWLogger").RetryLogState.LOGGED_RETRY&&o("ZenonDGWLogger").logDGWSucceededRetry(),e.$ZenonDGWStreamController$p_12=null,e.$ZenonDGWStreamController$p_10=s,e.$ZenonDGWStreamController$p_8=o("ZenonDGWLogger").RetryLogState.LOGGED_NONE,e.$ZenonDGWStreamController$p_20("Connected"),await((t=e.$ZenonDGWStreamController$p_2)==null?void 0:t.sendAllWith(n)),e.$ZenonDGWStreamController$p_3=n,n}catch(t){e.$ZenonDGWStreamController$p_12=null;var r=await e.$ZenonDGWStreamController$p_19(o("DGWStream").StreamError.isValid(t)?t:null);if(r)return r;throw t}})();return this.$ZenonDGWStreamController$p_12=t,t},t})(r("EventEmitter"));l.default=p}),98);
__d("SharedWorkerDGWSignalingListener",["FBLogger","ZenonDGWLogger","ZenonDGWStreamController","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=r("ZenonDGWStreamController").getControllerInstance(),r("promiseDone")(this.$1.establishAndGetStream())}var t=e.prototype;return t.setLoggingEventHandler=function(t){this.$2=t},t.subscribe=function(t,n){var e=this;this.$1.setOnDataReceivedCallback(function(a){try{var i=o("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(a,!0);r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","DGW Thrift",i),o("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(i),e.$2&&e.$2({mwThriftMessage:i,name:"mwThriftMessageRecv"}),n&&e.$3(i,n),t(i),o("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(i)}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("RECV_ERROR_LISTENER: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).warn("Error receiving DGW message in Shared Worker")}})},t.unsubscribe=function(){this.$1.closeStream()},t.$3=function(t,n){try{n(t)}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("RAW_MSG_ERROR_LISTENER: "+String(e)),r("FBLogger")("rtweb").catching(r("getErrorSafe")(e)).mustfix("Signaling messages should be json parsable")}},e})();l.default=e}),98);
__d("ZenonDGWTransportChannelStatus",["EventEmitter","ZenonDGWStreamController"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){var t;return t=e.call(this)||this,t.$ZenonDGWTransportChannelStatus$p_1=r("ZenonDGWStreamController").getControllerInstance(),t.$ZenonDGWTransportChannelStatus$p_1.addListener("connectionStateEvent",function(e){t.emit("connectionStateEvent",e)}),t}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getConnectionState=function(){return this.$ZenonDGWTransportChannelStatus$p_1.getConnectionState()},n.getTransportName=function(){return"dgw"},t})(r("EventEmitter"));l.default=e}),98);
__d("ZenonSharedWorkerMWThriftMessageSender",["ZenonDGWLogger","ZenonDGWStreamController","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageLogger","ZenonMWThriftMessageMap","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonValidateMWThriftMessage","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$3=r("ZenonDGWStreamController").getControllerInstance()}var t=e.prototype;return t.$4=async function(t){try{await this.$3.establishAndGetStream()}catch(n){var e=o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type);o("ZenonDGWLogger").logDGWCheckpoint("SEND_STREAM_ERROR: type="+e+" err="+String(n)),this.$5(t,"Failed to establish stream")}o("ZenonMWThriftMessageReliabilityLogger").logSendingMessage(t),r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("SENDING","DGW Thrift",t),this.$2&&o("ZenonMWThriftMessageLogger").logSentMessage(t,this.$2);var n=o("ZenonMWThriftMessageSerializer").serializeMWThriftMessage(t,!0),a=await this.$3.send(t.messageHeader.transactionId,n);if(a&&this.$2)this.$2({mwThriftMessage:t,name:"mwThriftMessageSent"});else if(!a){var i=o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type);o("ZenonDGWLogger").logDGWCheckpoint("SEND_FAIL: type="+i),this.$5(t,"Failed to send data")}},t.$5=function(t,n){var e=n!=null?n:"DGW Thrift Message Send Error";o("ZenonMWThriftMessageReliabilityLogger").logSendMessageFailed(t,"[DGW Thrift] "+e),r("ZenonMWThriftMessageDebugLogger").logSendMultiwayThriftMessageFailure(e,o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type))},t.sendMessage=function(t){return!t||!r("ZenonValidateMWThriftMessage")(t)?(o("ZenonDGWLogger").logDGWCheckpoint("SEND_INVALID_MSG"),Promise.reject(r("err")("Invalid MW Thrift message"))):this.$4(t)},t.setMessageReceiver=function(t){this.$1=t},t.setLoggingEventHandler=function(t){this.$2=t},e})();l.default=e}),98);
__d("ZenonSignalingSharedWorker",["CurrentWorkerMessagePort","FBLogger","SharedWorkerDGWSignalingListener","ZenonDGWLogger","ZenonDGWStreamController","ZenonMWThriftMessageMap","ZenonSharedWorkerMWThriftMessageSender","getErrorSafe","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=0,u=null,c=!1,d=!1,m=null;function p(){o("ZenonDGWLogger").setSharedWorkerContext(function(e){b({event:{checkpoint:e,name:"sharedWorkerCheckpoint"},type:"LOGGING_EVENT"})});var e=o("CurrentWorkerMessagePort").getMessagePort();e.addEventListener("message",function(t){y(t.data,e)})}function _(e){if(!c)try{e!=null&&(u=new(r("SharedWorkerDGWSignalingListener")));var t=u;t!=null&&(t.subscribe(function(e){return h(e)},function(e){return g(e)}),t.setLoggingEventHandler(function(e){f(e)}),c=!0,f({name:"dgwConnectionState",pending:!1}))}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("SUBSCRIBE_ERROR: Failed to initialize signaling subscription from Shared Worker"+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).warn("Failed to initialize signaling subscription from Shared Worker")}}function f(e){b({event:e,type:"LOGGING_EVENT"})}function g(e){b({rawMessage:e,type:"RAW_MW_THRIFT_MESSAGE"})}function h(t){var n=e.size;if(n===0){var r=o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type);o("ZenonDGWLogger").logDGWCheckpoint("MESSAGE_DROPPED: 0_connections type="+r)}b({message:t,type:"SIGNALING_MESSAGE"})}function y(e,t){if(!(typeof e!="object"||e==null||!("type"in e)||typeof e.type!="string")){if(e.type==="INIT_DGW_CONFIG"&&"config"in e){var n=e.config;if(!d){var a;try{a=r("ZenonDGWStreamController").getControllerInstance()}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("INIT_ERROR_STREAM_CONTROLLER: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Failed to initialize ZenonDGWStreamController from Shared Worker");return}a.setWindowContext("SHARED_WORKER"),a.setStreamOptions({deviceId:n.deviceId,loggingId:r("uuidv4")(),serviceId:"rpsignaling"}),a.setDGWConfig(n),d=!0}_(n);return}else if(e.type==="register"&&"windowType"in e&&(e.windowType==="CHILD"||e.windowType==="PARENT")){C(e.windowType,t);return}else if(e.type==="SEND_SIGNALING_MESSAGE"&&"message"in e){v(e.message,t);return}}}function C(t,n){var r=s++;e.set(r,{connectionId:r,port:n,windowType:t}),n.postMessage({response:{from:"zenon_signaling_shared_worker",workerID:"zenon_signaling_worker_1"},type:"connection-ack"})}function b(t){e.forEach(function(e){try{e.port.postMessage(t)}catch(t){o("ZenonDGWLogger").logDGWCheckpoint("BROADCAST_FAIL: type="+e.windowType+" Connection Id: "+e.connectionId+" Error: "+String(t)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(t)).warn("Failed to send message from Shared Worker to window: type=%s, connectionId=%s",e.windowType,e.connectionId)}})}function v(e,t){try{m==null&&(m=new(r("ZenonSharedWorkerMWThriftMessageSender")),m.setLoggingEventHandler(function(e){f(e)})),m!=null&&m.sendMessage(e).then(function(){t.postMessage({type:"SIGNALING_MESSAGE_SENT"})}).catch(function(e){o("ZenonDGWLogger").logDGWCheckpoint("SEND_ERROR: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Failed to send outgoing message to DGW from Shared Worker")})}catch(e){o("ZenonDGWLogger").logDGWCheckpoint("OUTGOING_SENDER_ERROR: "+String(e)),r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Error processing outgoing message from Shared Worker")}}l.default=p}),98);
__d("ZenonSignalingSharedWorkerV2",["ZenonSignalingSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("ZenonSignalingSharedWorker")}),98);